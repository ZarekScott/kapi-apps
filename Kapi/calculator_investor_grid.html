
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kapi â€” Deal Calculator (Investor Pro, Grid)</title>
  <link rel="stylesheet" href="assets/css/brand.css">
  <script type="module" src="assets/js/theme.js" defer></script>
  <script type="module" src="assets/js/engine.js"></script>
  <script type="module" src="assets/js/calculator_investor_grid.js" defer></script>
</head>
<body>
  <header class="header">
    <div class="inner">
      <div class="logo"><strong>Kapi</strong></div>
      <nav class="nav"><a href="#">Deal Calculator (Investor Pro)</a></nav>
      <div class="actions">
        <button id="checkCF" class="btn primary">Check Cash Flow</button>
        <button class="btn" onclick="toggleTheme()"><span id="themeLabel">ðŸŒ™</span></button>
      </div>
    </div>
  </header>

  <main class="kapi-container" style="padding:24px 0 40px">
    <div class="grid" style="grid-template-columns: repeat(3, 1fr); gap: 16px">
      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Property</h3>
        <div class="grid">
          <label>Property Type
            <select id="propType" class="input">
              <option>Multifamily</option><option>Retail</option><option>Office</option>
              <option>Industrial</option><option>Self-Storage</option><option>Hospitality</option><option>Land</option>
            </select>
          </label>
          <label>Lease Type
            <select id="leaseType" class="input">
              <option>NNN</option><option>MG</option><option>Gross</option>
            </select>
          </label>
          <label>Units (#) <input id="units" class="input" type="number" step="1" placeholder="If applicable"></label>
          <label>NRA / SqFt <input id="nra" class="input" type="number" step="1" placeholder="Net rentable area"></label>
        </div>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Income</h3>
        <div class="grid">
          <label>GPR (Annual) <input id="gpr" class="input" type="number" placeholder="Gross potential rent"></label>
          <label>Vacancy (%) <input id="vacancy" class="input" type="number" step="0.25"></label>
          <label>Other Income (Annual) <input id="otherInc" class="input" type="number"></label>
          <p class="help">Or enter NOI directly in Price & NOI (we'll back-calc missing pieces).</p>
        </div>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Expenses</h3>
        <div class="grid">
          <label>Opex (Fixed Annual) <input id="opexFixed" class="input" type="number" placeholder="Repairs, admin, utilities, etc."></label>
          <label>Reserves (Annual) <input id="reserves" class="input" type="number" placeholder="Below NOI"></label>
          <label>Taxes (Annual) <input id="taxes" class="input" type="number"></label>
          <label>Insurance (Annual) <input id="ins" class="input" type="number"></label>
          <label>Mgmt (Annual) <input id="mgmt" class="input" type="number"></label>
          <label>Taxes (% of EGI) <input id="taxesPct" class="input" type="number" step="0.1"></label>
          <label>Insurance (% of EGI) <input id="insPct" class="input" type="number" step="0.1"></label>
          <label>Mgmt (% of EGI) <input id="mgmtPct" class="input" type="number" step="0.1"></label>
        </div>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Price & NOI</h3>
        <div class="grid">
          <label>Purchase Price <input id="price" class="input" type="number"></label>
          <label>NOI (Annual) <input id="noi" class="input" type="number"></label>
          <label>Cap Rate (%) <input id="capRate" class="input" type="number" step="0.05"></label>
          <p class="help">Two-of-three: provide any two and Kapi computes the third.</p>
        </div>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Leverage</h3>
        <div class="grid">
          <label>LTV (%) <input id="ltv" class="input" type="number" step="0.5"></label>
          <label>Down Payment <input id="down" class="input" type="number"></label>
          <label>Loan Amount <input id="loanAmt" class="input" type="number"></label>
          <p class="help">Give one when Price is knownâ€”others are inferred.</p>
        </div>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Debt</h3>
        <div class="grid">
          <label>Loan Type
            <select id="loanType" class="input">
              <option>Amortizing</option><option>IO Only</option>
            </select>
          </label>
          <label>Preset
            <select id="preset" class="input">
              <option value="">â€” Choose â€”</option>
              <option>Conventional Fixed</option>
              <option>Bridge / Value-Add</option>
              <option>IO Only</option>
              <option>SBA 7(a)</option>
              <option>SBA 504</option>
            </select>
          </label>
          <label>Rate (%) <input id="rate" class="input" type="number" step="0.05"></label>
          <label>Amortization (Years) <input id="amortY" class="input" type="number" step="1"></label>
          <label>Interest-Only (Years) <input id="ioY" class="input" type="number" step="1" placeholder="0 = none"></label>
        </div>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Health</h3>
        <div class="kpi"><span class="light" id="cashLight"></span> <strong>Cash Flow Signal</strong></div>
        <p class="help">Green = positive CF after debt & reserves. Red = negative.</p>
        <table>
          <tr><th>CF After Debt & Reserves</th><td id="oCFADR">â€”</td></tr>
          <tr><th>Debt Service (Annual)</th><td id="oDebt">â€”</td></tr>
          <tr><th>Loan Amount</th><td id="oLoan">â€”</td></tr>
        </table>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Key Metrics</h3>
        <table>
          <tr><th>Cap Rate</th><td id="oCap">â€”</td></tr>
          <tr><th>EGI</th><td id="oEGI">â€”</td></tr>
          <tr><th>Vacancy Loss</th><td id="oVacLoss">â€”</td></tr>
          <tr><th>NOI</th><td id="oNOI">â€”</td></tr>
          <tr><th>DSCR</th><td id="oDSCR">â€”</td></tr>
          <tr><th>Cash-on-Cash</th><td id="oCoC">â€”</td></tr>
          <tr><th>Debt Yield</th><td id="oDebtYield">â€”</td></tr>
          <tr><th>Break-even Occ.</th><td id="oBreakeven">â€”</td></tr>
          <tr><th>Debt Constant</th><td id="oDebtConst">â€”</td></tr>
          <tr><th>LTV</th><td id="oLTV">â€”</td></tr>
        </table>
      </div>

      <div class="kapi-card p-6">
        <h3 class="m-0 mb-2">Per-Unit / Per-SF</h3>
        <table>
          <tr><th>Price / Unit</th><td id="oPPU">â€”</td></tr>
          <tr><th>Price / SF</th><td id="oPPSF">â€”</td></tr>
          <tr><th>Rent / SF / Yr</th><td id="oRPSF">â€”</td></tr>
          <tr><th>NOI / SF / Yr</th><td id="oNOISF">â€”</td></tr>
        </table>
        <p class="help">Enter Units or NRA to unlock these.</p>
      </div>
    </div>
  </main>

  <div id="toast" class="toast">Ready.</div>

<script src="https://cdn.auth0.com/js/auth0-spa-js/2.5/auth0-spa-js.production.js"></script>
<script src="/auth0-config.js"></script>
<script src="/auth0-client.js"></script>

</body>
</html>
